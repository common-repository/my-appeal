{"code":"!function(e){var t={};function o(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var s in e)o.d(i,s,function(t){return e[t]}.bind(null,s));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\",o(o.s=0)}([function(e,t){((e,t,o)=>{const i={className:\"MyAppeal\",default_options:{verboseLogging:!1,testCookieName:\"ac_test\",appealCodeCookieName:\"temporary_ac\",designationIDCodeCookieName:\"temporary_dids\",verboseLoggingCookieName:\"my_appeal_verbose_logging\",appealCodeURLParameterKey:\"appealcode\",designationIDURLParameterKey:\"dids\",designationIDURLDelimiter:\".\",appealCodeiModulesParameterKey:\"appealcode\",designationIDiModulesParameterKey:\"dids\",appealCodeLifetimeInMinutes:1,verboseLoggingLifetimeInMinutes:20},init(t,o){if(this.$elem=e(o),this.options=e.extend({},this.default_options,this.$elem.data(),t),this.getCookie(this.options.verboseLoggingCookieName)&&(this.options.verboseLogging=!0),this.urlAppealCode=this.getURIParameter(this.options.appealCodeURLParameterKey),this.cookieAppealCode=this.getCookie(this.options.appealCodeCookieName),this.urlAppealCode&&(this.debug(`Removing appeal code ${this.urlAppealCode} from URL`),this.removeParameterFromURL(this.options.appealCodeURLParameterKey)),this.urlDesignationsIds=this.getURIParameter(this.options.designationIDURLParameterKey),this.cookieDesignationIds=this.getCookie(this.options.designationIDCodeCookieName),this.urlDesignationsIds&&(this.debug(`Removing designation ID string ${this.urlDesignationsIds} from URL`),this.removeParameterFromURL(this.options.designationIDURLParameterKey)),this.browserIsCapableOfHandelingCookies()){const e=this.getCookieExpirationTime(this.options.appealCodeLifetimeInMinutes);this.urlAppealCode&&this.urlAppealCode!==this.cookieAppealCode&&this.setCookie(this.options.appealCodeCookieName,this.urlAppealCode,e),this.urlDesignationsIds&&this.urlDesignationsIds!==this.cookieDesignationIds&&this.setCookie(this.options.designationIDCodeCookieName,this.urlDesignationsIds,e)}else this.warn(\"This browser is not accepting cookies from this website.\")},getCurrentAppealCode(){const{urlAppealCode:e,cookieAppealCode:t}=this;return e?(this.debug(`URL appeal code detected (${e})`),e):t?(this.debug(`Cookie appeal code detected (${t})`),t):null},getCurrentDesignationIDs(){const{urlDesignationsIds:e,cookieDesignationIds:t}=this;return e?(this.debug(`URL designation IDs detected (${e})`),e.split(this.options.designationIDURLDelimiter)):t?(this.debug(`Cookie designation IDs detected (${t})`),t.split(this.options.designationIDURLDelimiter)):null},removeParameterFromURL(e){const i=t.location.href.split(\"?\");let s=i[0];if(i.length>1){const t=i[1].split(\"&\");let o=!1;for(let i=0;i<t.length;i+1){const n=t[i].split(\"=\");n[0]!==e&&(s+=o?\"&\":\"?\",s+=n.join(\"=\"),o||(o=!0))}}history.pushState?t.history.pushState(o.title,o.title,s):this.warn(\"Pushstate not supported by this browser\")},changeAllAppealCodesOnPage(e){const t=this.updateURLParameter(this.options.appealCodeiModulesParameterKey,e),o=1===t?\"link\":\"links\";this.debug(`Appeal code replacement complete (changed ${t} ${o}) : current appeal code is ${e}`)},changeAllDesignationIDsOnPage(e){const t=this.updateURLParameter(this.options.designationIDiModulesParameterKey,e,this.formatDesignationIDString),o=1===t?\"link\":\"links\";this.debug(`Designation ID replacement complete (changed ${t} ${o})`)},formatDesignationIDString(e,t){const o=t,i=e.split(this.options.designationIDURLDelimiter);for(let e=0;e<i.length;e+1){const t=i[e];-1===o.indexOf(t)&&o.push(t)}return o.join(this.options.designationIDURLDelimiter)},updateURLParameter(t,o,i){let s=0;return e('a[href*=\"?\"]').each(()=>{const n=e(this).attr(\"href\");if(this.uriContainsRequiredComponentsToChangeAppealCode(n)){let a,r=\"\";const l=n.split(/\\?|&/g);let p=!1;for(let e=0;e<l.length;e+1){const s=l[e],n=s.split(\"=\"),d=n[0],g=n[1];switch(e){case 0:a=\"\";break;case 1:a=\"?\";break;default:a=\"&\"}if(d===t){let e=o;i&&(e=i.call(this,g,o)),r+=`${a+t}=${e}`,p=!0}else r+=a+s}p||(a=l.length>1?\"&\":\"?\",r+=`${a+t}=${o}`),e(this).attr(\"href\",r),s+=1}}),s},uriContainsRequiredComponentsToChangeAppealCode(e){let t=!0;for(let o=0;o<this.options.requiredURIComponentsToAppendOrReplaceAppealCode.length;o+1){const i=this.options.requiredURIComponentsToAppendOrReplaceAppealCode[o];-1===e.indexOf(i)&&(t=!1)}return t},getCookieExpirationTime(e){const t=parseInt(e,10),o=new Date;return o.setMinutes(o.getMinutes()+t),o.toUTCString()},getURIParameter(e){e.replace(/[[]/,\"\\\\[\").replace(/[\\]]/,\"\\\\]\");const t=new RegExp(`[\\\\?&]${e}=([^&#]*)`).exec(location.search);return null===t?\"\":decodeURIComponent(t[1].replace(/\\+/g,\" \"))},browserIsCapableOfHandelingCookies(){const e=Math.floor(1e5*Math.random()+1e3);this.setCookie(this.options.testCookieName,e);const t=parseInt(this.getCookie(this.options.testCookieName),10);return this.deleteCookie(this.options.testCookieName),t===e},getCookie(e){const t=e+\"=\",i=o.cookie.split(\";\");for(let e=0;e<i.length;e+1){const o=i[e].trim();if(-1!==o.indexOf(t))return o.substring(t.length,o.length)}return\"\"},setCookie(e,t,i){const s=\"expires=\"+i;o.cookie=`${e}=${t}; ${s}`},deleteCookie(e){this.debug(\"Delete cookie: \"+e),o.cookie=e+\"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;\"},debug(e,t){this.options.verboseLogging,console.debug(`${this.className} - ${e}`)},error(e){console.error(`${this.className} - ${e}`)},warn(e){console.warn(`${this.className} - ${e}`)}};let s;e(()=>{(e=>{s=Object.create(i),s.init(e);const t=s.getCurrentAppealCode();t&&s.changeAllAppealCodesOnPage(t);const o=s.getCurrentDesignationIDs();o&&s.changeAllDesignationIDsOnPage(o)})(my_appeal_local_object)})})(jQuery,window,document)}]);","extractedComments":[]}